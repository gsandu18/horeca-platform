<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Login Platformă HoReCa</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
<style>
  body { margin:0; font-family:'Segoe UI', sans-serif; background: #eef2f5; }
  .container { max-width:900px; margin:40px auto; display:flex; flex-wrap:wrap; gap:2rem; justify-content:center; }
  .login-card { background:#fff; border-radius:10px; padding:30px; box-shadow:0 6px 20px rgba(0,0,0,0.1); width:100%; max-width:380px; text-align:center; }
  .login-card h2 { margin-bottom:20px; color:#003366; }
  .login-card input { width:100%; padding:12px; margin:10px 0; border:1px solid #ccc; border-radius:8px; }
  .login-card button { width:100%; padding:14px; margin:10px 0; background:#007b8a; color:#fff; border:none; border-radius:8px; cursor:pointer; }
  .login-card button:hover { background:#005f6b; }
  .login-card p.msg { font-size:0.95rem; margin-top:8px; }
  .login-card a { display:block; margin-top:8px; color:#007b8a; text-decoration:none; }
  .login-card a:hover { text-decoration:underline; }
  @media(max-width:768px){ .container{flex-direction:column;padding:0 20px;} }
</style>
</head>
<body>

<div class="container">
  <!-- Candidat -->
  <div class="login-card">
    <h2><i class="fas fa-user"></i> Candidat</h2>
    <input type="email" id="email-candidat" placeholder="Email">
    <input type="password" id="pass-candidat" placeholder="Parolă">
    <button onclick="login('candidat')">Login Candidat</button>
    <p id="msg-candidat" class="msg"></p>
    <button onclick="loginWithGoogle('candidat')" style="background:#de5246;"> <i class="fab fa-google"></i> Continuă cu Google</button>
    <p class="alt-link">
    <a href="#" onclick="resetPassword('candidat')">Ai uitat parola?</a>
    <a href="inregistrare-candidat.html">Creează cont candidat</a>
    </p>
  </div>

  <!-- Firmă -->
  <div class="login-card">
    <h2><i class="fas fa-building"></i> Firmă</h2>
    <input type="email" id="email-firma" placeholder="Email firmă">
    <input type="password" id="pass-firma" placeholder="Parolă firmă">
    <button onclick="login('firma')">Login Firmă</button>
    <p id="msg-firma" class="msg"></p>
    <button onclick="loginWithGoogle('firma')" style="background:#de5246;"> <i class="fab fa-google"></i> Continuă cu Google</button>
    <p class="alt-link">
    <a href="#" onclick="resetPassword('firma')">Ai uitat parola?</a>
    <a href="inregistrare-firma.html">Înregistrează firmă</a>
    </p>
  </div>
</div>

<!-- Firebase compat SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDvsEfnjVmOkPkExebfxOZ5e3ALRVG0Z-w",
    authDomain: "gsandu18.github.io/.firebaseapp.com",
    projectId: "gsandu18.github.io/",
    storageBucket: "gsandu18.github.io/.appspot.com",
    messagingSenderId: "332871951184",
    appId: "1:332871951184:web:7e65e3a1b1b61c46768255",
    measurementId: "G-7W3VJXW81D"
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  async function login(role) {
    const email = document.getElementById(`email-${role}`).value.trim();
    const pass = document.getElementById(`pass-${role}`).value.trim();
    const msg = document.getElementById(`msg-${role}`);
    msg.textContent = '';
    if (!email || !pass) {
      msg.textContent = "Completează toate câmpurile!";
      msg.style.color = 'red';
      return;
    }
    try {
      await auth.signInWithEmailAndPassword(email, pass);
      msg.textContent = "Autentificare reușită!";
      msg.style.color = 'green';
      const dest = role === 'firma' ? 'dashboard-firma.html' : 'dashboard-candidat.html';
      setTimeout(() => window.location.href = dest, 1200);
    } catch (e) {
      msg.textContent = "Eroare: " + e.message;
      msg.style.color = 'red';
    }
  }

  function resetPassword(role) {
    const email = document.getElementById(`email-${role}`).value.trim();
    const msg = document.getElementById(`msg-${role}`);
    if (!email) {
      msg.textContent = "Introdu emailul pentru resetare!";
      msg.style.color = 'red';
      return;
    }
    auth.sendPasswordResetEmail(email)
      .then(() => {
        msg.textContent = "Email resetare trimis!";
        msg.style.color = 'green';
      })
      .catch(e => {
        msg.textContent = "Eroare: " + e.message;
        msg.style.color = 'red';
      });
  }

  function loginWithGoogle(role) {
    const provider = new firebase.auth.GoogleAuthProvider();
    auth.signInWithPopup(provider)
      .then(() => {
        const dest = role === 'firma' ? 'dashboard-firma.html' : 'dashboard-candidat.html';
        window.location.href = dest;
      })
      .catch(e => {
        document.getElementById(`msg-${role}`).textContent = "Eroare: " + e.message;
        document.getElementById(`msg-${role}`).style.color = 'red';
      });
  }
</script>

</body>
</html>
